package com.board.model;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import db.DBConnection;

public class BoardDAO { //db 연동(jdbc+dbcp) 객체 생성
	   Connection con = null;
	   PreparedStatement pstmt = null;
	   ResultSet rs = null;
	   String sql = null;
	   
	   public BoardDAO(){
		   DBConnection db;
		try {
			db = new DBConnection();
			con = db.con;
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}   
	   }//생성자 end
	   
	   /* getBoardList() */
	   public List<BoardDTO>getBoardList(){ //전체 게시물 목록 보기
		   List<BoardDTO> list = new ArrayList<BoardDTO>();
		   sql = "select * from jsp_board order by board_no desc";
		   try{
			   pstmt = con.prepareStatement(sql);
			   rs = pstmt.executeQuery();
			   while(rs.next()){
				   //레코드를 칼럼 단위로 가져와서 dto에 저장
				   BoardDTO dto = new BoardDTO();
				   dto.setBoard_no(rs.getInt("board_no"));
				   dto.setBoard_name(rs.getString("board_name"));
				   dto.setBoard_title(rs.getString("board_title"));
				   dto.setBoard_cont(rs.getString("board_cont"));
				   dto.setBoard_pwd(rs.getString("board_pwd"));
				   dto.setBoard_hit(rs.getInt("board_hit"));
				   dto.setBoard_regdate(rs.getString("board_regdate"));
				   
				   //dto 갹체를 list에 추가
				   list.add(dto);
			   }
			   
		   }catch(Exception e){
			   e.printStackTrace();
		   }
	   }
}
