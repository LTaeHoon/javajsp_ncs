<%@page import="db.DBConnection"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%
	request.setCharacterEncoding("UTF-8");
	String id = request.getParameter("id");
	String pwd = request.getParameter("password");
	String name = request.getParameter("name");
	
    Connection con = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    String sql = null;
    
 	DBConnection db = new DBConnection();   
    try{
    	sql="select * from jsp_member where id=?";
    	pstmt = con.prepareStatement(sql);
    	pstmt.setString(1,id);
    	rs=pstmt.executeQuery();
    	if(rs.next()){  //이미 같은 아이디가 있는 경우
    		%>
    		<h2>중복 아이디 경우</h2>
    		<% 
    		   out.println("<script>");
			   out.println("alert('다른 아이디를 사용하세요')");
			   out.println("location.href='member_form.jsp'");
			   out.println("</script>");
    	}else{
    		sql="insert into jsp_member values(?,?,?)";
    		
    	}
    }catch(Exception e){
    	e.printStackTrace();
    }
%>